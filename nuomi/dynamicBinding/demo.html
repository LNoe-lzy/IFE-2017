<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>dynamicBinding</title>
</head>
<body>
	<script type="text/javascript">
		function Observer(data) {
			this.data = data;
			this.walk(data);
		}
		Observer.prototype = {
			constructor: Observer,
			walk : function(obj) {
				let val;
				for (let key in obj) {
					val = obj[key];
					this.convert(key, val);
				}
			},
			convert : function(key, val) {
				Object.defineProperty(this.data, key, {
					get: function() {
						console.log('访问了' + key);
						return val;
					},
					set: function(newVal) {
						console.log('你设置了 ' + key + ', 新的值为 ' + newVal);		
						val = newVal;
					}
				});
			}
		};
		let app1 = new Observer({
			name: 'youngwind',
			age: 25
		});
		let app2 = new Observer({
			university: 'youngwind',
			major: 'computer'
		});
		
	</script>
</body>
</html>